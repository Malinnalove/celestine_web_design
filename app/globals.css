@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
}

body {
  @apply min-h-screen bg-sand font-body text-ink antialiased;
}

.theme-beast {
  --ink: #000000;
  --ink-60: rgba(0, 0, 0, 0.6);
  --ink-70: rgba(0, 0, 0, 0.72);
  --panel: #fff;
  --surface: #f0f0f0;
  --accent: #ff00cc;
  /* Hot Pink */
  --muted: #111111;
  --muted-80: rgba(17, 17, 17, 0.8);
  --shadow: 8px 8px 0 #000000;

  /* Vibrant, playful background */
  background-color: #e0e0e0;
  background-image:
    radial-gradient(circle at 10% 20%, #ccff00 0%, transparent 20%),
    radial-gradient(circle at 90% 80%, #00ffff 0%, transparent 20%),
    radial-gradient(circle at 50% 50%, #ff00cc 0%, transparent 10%),
    linear-gradient(45deg, #e0e0e0 25%, transparent 25%, transparent 75%, #e0e0e0 75%, #e0e0e0),
    linear-gradient(45deg, #e0e0e0 25%, transparent 25%, transparent 75%, #e0e0e0 75%, #e0e0e0);
  background-size: 100% 100%, 100% 100%, 100% 100%, 20px 20px, 20px 20px;
  background-position: 0 0, 0 0, 0 0, 0 0, 10px 10px;

  color-scheme: light;
  --font-heading: var(--font-beast-heading);
  --font-body: var(--font-beast-body);

  /* Mood tracker sizing (beast only) */
  --mood-cell-size: 16px; /* layout step (center distance) */
  --mood-icon-size: 22px; /* visual icon size */
  --mood-icon-spread-scale: 1.14; /* thicker stroke feel */
  --mood-icon-spread-blur: 0.9px; /* slight diffusion */
  --mood-choice-size: 60px; /* edit modal mood icons */
}

.theme-beast body {
  background: transparent;
}

.theme-beast .bg-sand,
.theme-beast .bg-white,
.theme-beast .bg-white\/90,
.theme-beast .bg-white\/80,
.theme-beast .bg-white\/70,
.theme-beast .bg-white\/60 {
  background-color: #ffffff !important;
  border: 3px solid var(--ink);
  box-shadow: var(--shadow);
}

.theme-beast .border-ink,
.theme-beast .border-ink\/10,
.theme-beast .border-ink\/15,
.theme-beast .border-ink\/20 {
  border-color: var(--ink) !important;
}

.theme-beast .text-ink {
  color: var(--ink) !important;
}

.theme-beast .text-ink\/60 {
  color: var(--ink-60) !important;
}

.theme-beast .text-ink\/70 {
  color: var(--ink-70) !important;
}

.theme-beast .shadow-soft {
  box-shadow: var(--shadow) !important;
}

.theme-beast .interactive-panel {
  border: 4px solid var(--ink) !important;
  background: #ffffff;
  box-shadow: var(--shadow);
  border-radius: 0 !important;
}

.theme-beast .interactive-panel::before,
.theme-beast .interactive-panel::after {
  display: none;
}

.theme-beast .rounded-3xl,
.theme-beast .rounded-\[40px\],
.theme-beast .rounded-\[48px\],
.theme-beast .rounded-2xl {
  border-radius: 0 !important;
  border: 3px solid var(--ink);
  box-shadow: var(--shadow);
}

.theme-beast .rounded-full {
  border: 3px solid var(--ink);
  box-shadow: 4px 4px 0 var(--ink);
}

.theme-beast input,
.theme-beast textarea,
.theme-beast button {
  border: 3px solid var(--ink);
  box-shadow: 6px 6px 0 var(--ink);
  background-color: #ffffff;
  color: var(--ink);
  font-weight: bold;
  transition: all 0.1s ease;
}

.theme-beast button:hover,
.theme-beast a.button:hover {
  transform: translate(-2px, -2px);
  box-shadow: 10px 10px 0 var(--ink);
  background-color: #ccff00;
  /* Neon yellow-green on hover */
}

.theme-beast button:active,
.theme-beast a.button:active {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0 var(--ink);
}

.theme-beast a:hover {
  text-decoration-thickness: 3px;
  text-decoration-color: var(--accent);
  color: var(--accent);
}

h1,
h2,
h3,
h4 {
  @apply font-heading tracking-tight;
}

.prose-content p {
  @apply leading-relaxed;
}

.prose-content p+p {
  @apply mt-4;
}

a {
  @apply transition-colors duration-200;
}

.shadow-soft {
  box-shadow: 0 20px 50px rgba(31, 27, 22, 0.08);
}

@layer components {
  .markdown-content {
    @apply space-y-3 text-sm leading-relaxed text-ink/80;
  }

  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3,
  .markdown-content h4 {
    @apply font-heading text-ink;
  }

  .markdown-content p {
    @apply leading-relaxed text-ink/80;
  }

  .markdown-content ul {
    @apply list-disc pl-6;
  }

  .markdown-content ol {
    @apply list-decimal pl-6;
  }

  .markdown-content a {
    @apply text-ink underline underline-offset-4;
  }

  .markdown-content strong {
    @apply text-ink font-semibold;
  }

  .markdown-content code {
    @apply rounded bg-sand px-1 py-0.5 text-[0.85em] text-ink;
  }

  .markdown-content blockquote {
    @apply border-l-4 border-blush/50 bg-sand/70 py-2 pl-4 text-ink/80;
  }
}

.markdown-preview {
  position: relative;
  max-height: 16rem;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.interactive-panel {
  position: relative;
  overflow: hidden;
  transition: transform 300ms ease, box-shadow 300ms ease;
  background: linear-gradient(135deg, rgba(255, 248, 235, 0.9), rgba(255, 240, 210, 0.64));
  backdrop-filter: blur(14px);
  border: 2px solid rgba(255, 255, 255, 0.5);
}

.interactive-panel::before,
.interactive-panel::after {
  content: "";
  position: absolute;
  inset: -20%;
  background: radial-gradient(circle at 25% 20%, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0) 50%),
    radial-gradient(circle at 78% 72%, rgba(255, 234, 200, 0.5), rgba(255, 255, 255, 0) 60%);
  filter: blur(10px);
  opacity: 0.38;
  transition: opacity 400ms ease, transform 400ms ease;
  z-index: 0;
  pointer-events: none;
}

.interactive-panel:hover {
  transform: translateY(-4px);
  box-shadow: 0 30px 60px rgba(31, 27, 22, 0.12);
}

.interactive-panel:hover::before,
.interactive-panel:hover::after {
  opacity: 1;
  transform: scale(1.02);
}

.interactive-panel>* {
  position: relative;
  z-index: 1;
}

@keyframes reveal-left {
  0% {
    opacity: 0;
    transform: translateX(-24px);
  }

  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes reveal-right {
  0% {
    opacity: 0;
    transform: translateX(24px);
  }

  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes layer-reveal {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
    box-shadow: 0 20px 50px rgba(31, 27, 22, 0.0);
  }

  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.01);
    box-shadow: 0 20px 50px rgba(31, 27, 22, 0.08);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    box-shadow: 0 20px 50px rgba(31, 27, 22, 0.08);
  }
}

.animate-reveal-left {
  animation: reveal-left 900ms ease forwards;
}

.animate-reveal-right {
  animation: reveal-right 950ms ease forwards;
}

.animate-layer-reveal {
  animation: layer-reveal 950ms ease forwards;
}

.glass-card {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.35));
  border: 1px solid rgba(255, 255, 255, 0.35);
  box-shadow: 0 20px 50px rgba(31, 27, 22, 0.12);
  backdrop-filter: blur(16px);
}

.elastic-reveal {
  animation: elastic-reveal 900ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes elastic-reveal {
  0% {
    opacity: 0;
    transform: scale(0.6) translateY(8px);
  }

  60% {
    opacity: 1;
    transform: scale(1.1) translateY(-4px);
  }

  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.wave-reveal {
  animation: wave-reveal 1.1s ease var(--wave-delay, 0ms) both;
}

.has-entry.wave-reveal {
  animation:
    wave-reveal 1.1s ease var(--wave-delay, 0ms) both,
    flash-glow 0.7s ease var(--wave-delay, 0ms) both;
}

@keyframes wave-reveal {
  0% {
    opacity: 0;
    transform: translateY(12px) scale(0.8);
  }

  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.05);
  }

  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes sprout-reveal {
  0% {
    opacity: 0;
    transform: scale(0.82, 0.12);
  }

  40% {
    opacity: 1;
    transform: scale(1.08, 1.12);
  }

  62% {
    transform: scale(0.98, 0.96);
  }

  82% {
    transform: scale(1.02, 1.04);
  }

  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes flash-glow {
  0% {
    box-shadow: var(--mood-shadow, 0 4px 12px rgba(0, 0, 0, 0.08));
    filter: brightness(1);
  }

  40% {
    box-shadow: var(--mood-shadow, 0 4px 12px rgba(0, 0, 0, 0.08));
    filter: brightness(1.25);
  }

  100% {
    box-shadow: var(--mood-shadow, 0 4px 12px rgba(0, 0, 0, 0.08));
    filter: brightness(1);
  }
}

.mood-cell {
  background-color: var(--mood-color, rgba(0, 0, 0, 0.04));
  box-shadow: var(--mood-shadow);
}

.theme-beast .wave-reveal {
  animation: none !important;
}

.theme-beast .has-entry.wave-reveal {
  transform-origin: 50% 100%;
  will-change: transform, opacity;
  animation: sprout-reveal 0.75s cubic-bezier(0.16, 1, 0.3, 1) var(--beast-delay, 0ms) both !important;
}

.theme-beast .mood-cell {
  background: transparent;
  border: none;
  box-shadow: none;
  width: var(--mood-cell-size);
  height: var(--mood-cell-size);
}

.theme-beast .mood-grid {
  gap: 0px;
}

.theme-beast .mood-column {
  gap: 0px;
}

.theme-beast .mood-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  padding: 14px 14px 18px;
  scrollbar-width: thin;
  scrollbar-color: #000000 rgba(255, 255, 255, 0.5);
  background: #ffffff;
  border: 3px solid #000000;
  box-shadow: none !important;
  border-radius: 0 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.theme-beast .mood-scroll::-webkit-scrollbar {
  display: block;
  height: 10px;
}

.theme-beast .mood-scroll::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.55);
  border-radius: 0;
  border: 2px solid #000000;
}

.theme-beast .mood-scroll::-webkit-scrollbar-thumb {
  background: #000000;
  border-radius: 0;
  border: 2px solid rgba(255, 255, 255, 0.6);
}

.theme-beast .mood-cell::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--mood-icon-size);
  height: var(--mood-icon-size);
  transform: translate(-50%, -50%) translate(var(--mood-jx, 0px), var(--mood-jy, 0px))
    scale(var(--mood-icon-spread-scale));
  pointer-events: none;
  background: var(--mood-color, rgba(0, 0, 0, 0.06));
  -webkit-mask-image: var(--mood-mask, url("/flower.png"));
  mask-image: var(--mood-mask, url("/flower.png"));
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
  z-index: 0;
}

.theme-beast .mood-choice {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  overflow: visible !important;
  transform: none !important;
  width: var(--mood-choice-size) !important;
  height: var(--mood-choice-size) !important;
  isolation: isolate;
}

.theme-beast .mood-choice::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--mood-color, #000000);
  pointer-events: none;
  opacity: 0;
  transform: translate3d(0, 14px, 0);
  transition: opacity 240ms ease, transform 320ms cubic-bezier(0.2, 0.85, 0.2, 1);
  will-change: transform, opacity;
  z-index: 0;
}

.theme-beast .mood-choice::after {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--mood-color, #000000);
  -webkit-mask-image: var(--mood-mask, url("/flower.png"));
  mask-image: var(--mood-mask, url("/flower.png"));
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;
  pointer-events: none;
  transform: translateZ(0);
  transition: background-color 240ms ease;
  z-index: 1;
}

.theme-beast .mood-choice.is-active {
  z-index: 2;
}

.theme-beast .mood-choice.is-active::before {
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

.theme-beast .mood-choice.is-active::after {
  background: #ffffff;
}

.mood-note:focus {
  border-color: var(--note-accent, #f3a6c4) !important;
}

.theme-beast .shade-choice {
  border: none !important;
  box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.35) !important;
  transform: none !important;
}

.theme-beast .shade-choice.is-active {
  box-shadow: 0 0 0 2px #ffffff, 0 0 0 5px #000000 !important;
}

.theme-beast .mood-cell > * {
  z-index: 1;
}

.theme-beast .mood-cell.has-entry:hover {
  background: transparent;
  border: none;
  box-shadow: none;
  transform: scale(1.35);
}

.theme-beast .mood-cell.has-entry:active {
  background: transparent;
  border: none;
  box-shadow: none;
  transform: scale(1.15);
}

.theme-beast :where(*, *::before, *::after) {
  border-radius: 0 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.scroll-reveal {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.6s ease, transform 0.8s ease;
}

.no-scrollbar {
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.scroll-reveal-left {
  transform: translateX(-18px);
}

.scroll-reveal-right {
  transform: translateX(18px);
}

.scroll-reveal.in-view {
  opacity: 1;
  transform: translateX(0) translateY(0);
}

.icon-glide {
  opacity: 0;
  transform: translateX(18px) rotate(80deg);
  animation: icon-glide 1s ease-out forwards;
}

@keyframes icon-glide {
  0% {
    opacity: 0;
    transform: translateX(18px) rotate(80deg);
  }

  100% {
    opacity: 1;
    transform: translateX(0) rotate(0deg);
  }
}

/* Diary interactive defaults */
.diary-card .diary-details {
  opacity: 1;
  max-height: none;
  transform: none;
}

/* Beast theme: neo-brut playful cards */
.theme-beast .diary-line {
  display: none;
}

.theme-beast .diary-stack {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 0.5rem 0;
}

.theme-beast .diary-card {
  flex: none;
  width: 100%;
  transition: transform 240ms ease, box-shadow 240ms ease, background-color 240ms ease, z-index 150ms ease;
  margin-top: -14px;
}

.theme-beast .diary-card:first-child {
  margin-top: 0;
}

.theme-beast .diary-card-inner {
  height: 100%;
  border: 3px solid var(--ink);
  background: #ffffff;
  color: var(--ink);
  box-shadow: var(--shadow);
  transition: all 250ms cubic-bezier(0.34, 1.56, 0.64, 1);
  /* Bouncy transition */
  border-radius: 0;
}

.theme-beast .diary-card-header h3,
.theme-beast .diary-card-header p {
  color: inherit;
}

.theme-beast .diary-card .diary-details {
  opacity: 0;
  max-height: 0;
  transform: translateY(12px);
  overflow: hidden;
  transition: opacity 250ms ease, max-height 250ms ease, transform 250ms ease;
}

.theme-beast .diary-card:hover {
  transform: translateY(-8px) rotate(-1deg) scale(1.02);
  z-index: 2;
}

.theme-beast .diary-stack:hover .diary-card:not(:hover) .diary-card-inner {
  filter: blur(1px) grayscale(0.5);
  transform: scale(0.98);
}

.theme-beast .diary-card:hover .diary-card-inner {
  background: #00ffff;
  /* Electric Blue on hover */
  color: #000000;
  box-shadow: 14px 14px 0 #000000;
  border-width: 4px;
}

.theme-beast .diary-card:hover .diary-details {
  opacity: 1;
  max-height: 1200px;
  transform: translateY(0);
}

.theme-beast .diary-marker {
  display: none;
}
